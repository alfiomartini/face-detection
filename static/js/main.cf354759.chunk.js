(this.webpackJsonpsmartbrain=this.webpackJsonpsmartbrain||[]).push([[0],{321:function(e,n,t){},322:function(e,n,t){},323:function(e,n,t){},324:function(e,n,t){},325:function(e,n,t){"use strict";t.r(n);var a=t(2),s=t(9),i=t.n(s),o=t(77),r=t.n(o),c=(t(84),t(85),t(86),t(20)),l=t(21),u=t(23),m=t(22),b=(t(87),t(88),function(e){var n=e.onInputChange,t=e.onSubmit;return Object(a.jsxs)("div",{className:"mt-4 image-form",children:[Object(a.jsx)("p",{children:"Detect faces in your pictures. Give it a try!"}),Object(a.jsxs)("div",{className:"",children:[Object(a.jsx)("input",{className:"",type:"text",onChange:n}),Object(a.jsx)("button",{className:"btn btn-dark btn-sm ml-2 py-1",onClick:t,children:" Detect"})]})]})}),d=(t(89),function(e){var n=e.name,t=e.rank;return Object(a.jsxs)("div",{className:"rank mt-4 text-center",children:[Object(a.jsx)("div",{className:"rank-message",children:"".concat(n,", your current number of entries is ...")}),Object(a.jsx)("div",{className:"rank-number",children:"".concat(t)})]})}),h=t(78),j=t.n(h),g=(t(321),function(e){var n=e.imageURL,t=e.boxes.map((function(e,n){return Object(a.jsx)("div",{className:"bounding-box",style:{top:e.top,right:e.right,left:e.left,bottom:e.bottom}},n)}));return Object(a.jsx)("div",{className:"face-image mt-3",children:Object(a.jsxs)("div",{className:"image-box",children:[Object(a.jsx)("img",{src:n,alt:"",id:"inputImg"}),Object(a.jsx)("div",{children:t})]})})}),p=(t(322),"https://facedet-api.herokuapp.com"),f={input:"",imageURL:"",loaded:!1,box:{},boxes:[],route:"signin",user:{id:0,name:"",email:"",entries:0,joined:""}},x={particles:{line_linked:{shadow:{enable:!0,color:"#3CA9D1",blur:5}},number:{density:{enable:!0,value_area:800},value:120}}},v=function(e){Object(u.a)(t,e);var n=Object(m.a)(t);function t(e){var a;return Object(c.a)(this,t),(a=n.call(this,e)).onEmailChange=function(e){a.setState({signInEmail:e.target.value})},a.onPasswordChange=function(e){a.setState({signInPassword:e.target.value})},a.onSubmitSignin=function(){var e=a.state,n=e.signInEmail,t=e.signInPassword;fetch("".concat(p,"/signin"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({email:n,password:t})}).then((function(e){return e.json().then((function(n){return{status:e.status,body:n}}))})).then((function(e){if(200===e.status)a.props.loadUser(e.body.user),a.props.onRouteChange("home");else{var n=document.querySelector(".signin-error");n.innerHTML=e.body.message,n.classList.remove("signin-error-hide")}})).catch((function(e){return console.log(e)}))},a.state={signInEmail:"",signInPassword:""},a}return Object(l.a)(t,[{key:"render",value:function(){var e=this.props.onRouteChange;return Object(a.jsxs)("div",{className:"signin-form",children:[Object(a.jsx)("h4",{className:"text-center",children:"Sign in "}),Object(a.jsxs)("div",{className:"mb-3",children:[Object(a.jsx)("label",{htmlFor:"email",className:"mb-2",children:"Email"}),Object(a.jsx)("input",{onChange:this.onEmailChange,placeholder:"email",className:"form-control",type:"email",name:"email",id:"email"})]}),Object(a.jsxs)("div",{className:"mb-3",children:[Object(a.jsx)("label",{htmlFor:"password",className:"mb-2",children:"Password"}),Object(a.jsx)("input",{onChange:this.onPasswordChange,placeholder:"password",className:"form-control",type:"password",name:"password",id:"password"})]}),Object(a.jsx)("div",{className:"signin-error signin-error-hide text-center my-3"}),Object(a.jsxs)("div",{className:"form-btns",children:[Object(a.jsx)("button",{type:"submit",className:"btn btn-outline-primary",onClick:this.onSubmitSignin,children:"Sign in"}),Object(a.jsx)("button",{type:"button",className:"btn btn-dark border boder-light",onClick:function(){return e("signup")},children:"Sign up"})]})]})}}]),t}(s.Component),O=(t(323),function(e){Object(u.a)(t,e);var n=Object(m.a)(t);function t(e){var a;return Object(c.a)(this,t),(a=n.call(this,e)).onNameChange=function(e){a.setState({signUpName:e.target.value})},a.onEmailChange=function(e){a.setState({signUpEmail:e.target.value})},a.onPasswordChange=function(e){a.setState({signUpPassword:e.target.value})},a.onSubmitSignup=function(){var e=a.state,n=e.signUpName,t=e.signUpEmail,s=e.signUpPassword;fetch("".concat(p,"/register"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({name:n,email:t,password:s})}).then((function(e){return e.json().then((function(n){return{status:e.status,body:n}}))})).then((function(e){if(200===e.status)a.props.loadUser(e.body.user),a.props.onRouteChange("home");else{var n=document.querySelector(".signup-error");n.innerHTML=e.body.message,n.classList.remove("signup-error-hide")}})).catch((function(e){return console.log(e)}))},a.state={signUpName:"",signUpEmail:"",signUpPassword:""},a}return Object(l.a)(t,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"signin-form",children:[Object(a.jsx)("h4",{className:"text-center",children:"Sign up "}),Object(a.jsxs)("div",{className:"mb-3",children:[Object(a.jsx)("label",{htmlFor:"name",className:"mb-2",children:"Name"}),Object(a.jsx)("input",{onChange:this.onNameChange,className:"form-control",type:"text",name:"name",id:"name"})]}),Object(a.jsxs)("div",{className:"mb-3",children:[Object(a.jsx)("label",{htmlFor:"email",className:"mb-2",children:"Email"}),Object(a.jsx)("input",{onChange:this.onEmailChange,className:"form-control",type:"email",name:"email",id:"email"})]}),Object(a.jsxs)("div",{className:"mb-3",children:[Object(a.jsx)("label",{htmlFor:"password",className:"mb-2",children:"Password"}),Object(a.jsx)("input",{onChange:this.onPasswordChange,className:"form-control",type:"password",name:"password",id:"password"})]}),Object(a.jsx)("div",{className:"signup-error signup-error-hide text-center my-3"}),Object(a.jsxs)("div",{className:"form-btns",children:[Object(a.jsx)("button",{type:"submit",className:"btn btn-outline-primary",onClick:this.onSubmitSignup,children:"Sign up"}),Object(a.jsx)("button",{type:"submit",className:"btn btn-dark border boder-light",onClick:function(){return e.props.onRouteChange("signin")},children:"Sign in"})]})]})}}]),t}(s.Component)),N=(t(324),function(e){var n=e.route,t=e.onRouteChange;return Object(a.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:Object(a.jsxs)("div",{className:"container-fluid",children:[Object(a.jsx)("span",{className:"navbar-brand",children:"Face Detection"}),Object(a.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(a.jsx)("span",{className:"navbar-toggler-icon"})}),Object(a.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[("signin"===n||"signup"===n)&&Object(a.jsxs)("ul",{className:"navbar-nav",children:[Object(a.jsx)("li",{className:"nav-item",onClick:function(){return t("signin")},children:Object(a.jsx)("span",{className:"nav-link",children:"Sign in"})}),Object(a.jsx)("li",{className:"nav-item",onClick:function(){return t("signup")},children:Object(a.jsx)("span",{className:"nav-link",children:"Sign up"})})]}),"home"===n&&Object(a.jsx)("ul",{className:"navbar-nav",children:Object(a.jsx)("li",{className:"nav-item",onClick:function(){return t("signin")},children:Object(a.jsx)("span",{className:"nav-link",children:"Sign out"})})})]})]})})}),y=function(e){Object(u.a)(t,e);var n=Object(m.a)(t);function t(){var e;return Object(c.a)(this,t),(e=n.call(this)).loadUser=function(n){f.user=n,e.setState(f)},e.calcFacesLocations=function(e){var n=document.getElementById("inputImg"),t=Number(n.width),a=Number(n.height);return e.outputs[0].data.regions.map((function(n,s){var i=e.outputs[0].data.regions[s].region_info.bounding_box,o=i.top_row,r=i.left_col,c=i.right_col,l=i.bottom_row;return{left:r*t,top:o*a,right:t-c*t,bottom:a-l*a}}))},e.displayFacesBoxes=function(n){e.setState({boxes:n})},e.updateRank=function(){var n=e.state.user;fetch("".concat(p,"/image"),{method:"put",headers:{"Content-type":"application/json"},body:JSON.stringify({email:n.email})}).then((function(e){return e.json()})).then((function(n){n&&e.setState(Object.assign(e.state.user,{entries:n}))})).catch((function(e){return console.log(e)}))},e.onInputChange=function(n){e.setState({input:n.target.value})},e.onSubmit=function(n){e.setState({imageURL:e.state.input,boxes:[]}),fetch("".concat(p,"/model"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({image_url:e.state.input})}).then((function(e){return e.json().then((function(n){return{status:e.status,body:n}}))})).then((function(n){if(200===n.status){var t=e.calcFacesLocations(n.body);e.displayFacesBoxes(t),e.updateRank()}})).catch((function(e){return console.log(e)}))},e.onRouteChange=function(n){e.setState({route:n})},e.state=f,e}return Object(l.a)(t,[{key:"componentDidMount",value:function(){fetch(p).then((function(e){return e.json()})).then((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state.route;return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(j.a,{className:"particles",params:x}),Object(a.jsx)(N,{route:this.state.route,onRouteChange:this.onRouteChange}),"signin"===e&&Object(a.jsx)(v,{onRouteChange:this.onRouteChange,loadUser:this.loadUser}),"signup"===e&&Object(a.jsx)(O,{onRouteChange:this.onRouteChange,loadUser:this.loadUser}),"home"===e&&Object(a.jsxs)("div",{children:[Object(a.jsx)(d,{name:this.state.user.name,rank:this.state.user.entries}),Object(a.jsx)(b,{onInputChange:this.onInputChange,onSubmit:this.onSubmit}),Object(a.jsx)(g,{imageURL:this.state.imageURL,box:this.state.box,boxes:this.state.boxes})]})]})}}]),t}(s.Component);r.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(y,{})}),document.getElementById("root"))},86:function(e,n,t){},87:function(e,n,t){},88:function(e,n,t){},89:function(e,n,t){}},[[325,1,2]]]);
//# sourceMappingURL=main.cf354759.chunk.js.map